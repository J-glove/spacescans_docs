
## Exposomes Formatted
This section describes the standardized practices for formatting output files generated by the raw exposome preprocessing scripts. Consistency and clarity are key, especially in labeling time and geographic identifiers.

### Input Data Sources
Refer to the **AvailableExposomeVariableList_2023.xlsx** for a complete list of data sources. Below are the current data sources and some details.

- ACAG
    - [Website]()
    - Format: .nc
    - Years Available: 1998 - 2022

- CACES
    - [Website]()
    - Format: .csv

- EPA NATA/ AirToxScreen
    - [NATA Website]()
    - [AirToxScreen Website]()
    - Format: .csv
    - Years Available:
        - NATA: 1996, 1999, 2002, 2005, 2011, 2014
        - AirToxScreen: 2017 - 2019
    
- HUD
    - [Website]()
    - Format: .dbf
    - Years available:

- Walkability Index
    - [Website]()
    - Format: .csv
    - Includes only GEOID10 and NatWalkInd

- FARA
    - [Website]()
    - Format: .csv

- ACS/NDI
    - TBD

- CBP/ZBP
    - [Website]()
    - Format: .csv

- UCR
    - [Website]()
    - Denominator from ACS - ??? - Ask Chengrong about this

### Output File Specifications
The ouptut file is a comma separated file containing the translated exposome values with the same temporal resolution as source and 9-digit zip-code geoidentifier. The filename should be of the form `preprocessed_[data_source].csv`. The field names should be consistent amongst the datasources. Currently, all fields need to be in UPPERCASE. For 9-digit zip-code resolution, the geoidentifier field is always `ZIP9`
__Needs Work__


### Command Line Interface (CLI)
The preprocessing pipeline simplifies the translation of raw exposome data into 9-digit zip-code based data. The following describes how to run the pipeline: [__Need to add a breakdown of the input and output of this pipeline__]

1. Command Line Flags

    Run the following command (example using National Walkability Index):
    ```
    python run_preprocessing_pipeline.py \
            --data_list path/to/data_list \
            --output_dir /path/to/output \
            --buffer_dir /path/to/buffer_files \
            --exposome_type wi
    ```
    > Need to give a list of the different accepted values for exposome type

2. Configuration File

    The `./example` directory contains sample configurations. Update the `config.yaml` to include:
        - __data_list__: Path to your raw exposome data
        - __output_dir__: Directory where processed data will be saved
        - __buffer_dir__: Location of temporary buffer files
        - __exposome_type__: Type of exposome data to process

    > For best practice, use absolute paths when defining directories.

    To run:
    ```
    python run_preprocessing_pipeline.py --config /path/to/config.yaml
    ```

3. Overriding Config Parameters

    When running the pipeline from a config file, we can use the command line flags to override parts of the config. This allows us to use the same config multiple times for slightly different run options.
    For example, to change the data list directory:

    ```
    python run_preprocessing_pipeline.py --config ./example/config.yaml --data_list /path/to/new/directory
    ```